services:
  jmeter-server:
    image: justb4/jmeter:latest
    container_name: jmeter-server
    restart: always
    environment:
      - JVM_ARGS=-Xms1g -Xmx2g
      - HOST_IP=${HOST_IP}           # IP pÃºblica del ECS
      - SERVER_RMI_SSL_DISABLE=true
      - RMI_LOCAL_PORT=50000
    ports:
      - "1099:1099"
      - "50000:50000"
    volumes:
      - ./tests:/tests
    command: >
      sh -c "jmeter-server -Djava.rmi.server.hostname=${HOST_IP} -Dserver.rmi.localport=50000 -Dserver.rmi.ssl.disable=true"
